{"version":3,"file":"js/9.a8efec26.js","mappings":"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","sources":["webpack://week6-test01/./node_modules/mitt/dist/mitt.mjs","webpack://week6-test01/./src/libs/emitter.js","webpack://week6-test01/./src/views/CartView.vue","webpack://week6-test01/./src/views/CartView.vue?73a2"],"sourcesContent":["export default function(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(n){n(e)}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(t,e)})}}}\n//# sourceMappingURL=mitt.mjs.map\n","import mitt from 'mitt'\nconst emitter = mitt()\nexport default emitter\n","<template>\n  <h2>購物車列表</h2>\n  <div class=\"container\">\n    <div class=\"row\">\n      <table class=\"table align-middle\">\n        <thead>\n          <tr>\n            <th>圖片</th>\n            <th>商品名稱</th>\n            <th>價格</th>\n            <th></th>\n          </tr>\n        </thead>\n        <tbody v-for=\"product in products\" :key=\"product.id + 'product'\">\n          <tr>\n            <td style=\"width: 200px\">\n              <div\n                :style=\"{ backgroundImage: `url(${product.imageUrl})` }\"\n                style=\"\n                  height: 100px;\n                  background-size: cover;\n                  background-position: center;\n                \"\n              ></div>\n            </td>\n            <td>\n              {{ product.title }}\n            </td>\n            <td>\n              <div class=\"h5\" v-if=\"product.price === product.origin_price\">\n                {{ product.price }} 元\n              </div>\n              <div v-else>\n                <del class=\"h6\">原價 {{ product.origin_price }} 元</del>\n                <div class=\"h5\">現在只要 {{ product.price }} 元</div>\n              </div>\n            </td>\n            <td>\n              <div class=\"btn-group btn-group-sm\">\n                <button\n                  :disabled=\"isLoadingItem === product.id\"\n                  type=\"button\"\n                  class=\"btn btn-outline-danger\"\n                  @click=\"addToCart(product)\"\n                >\n                  <!-- <i class=\"fas fa-spinner fa-pulse\"></i> -->\n                  <div\n                    v-show=\"isLoadingItem === product.id\"\n                    class=\"spinner-border spinner-border-sm\"\n                    role=\"status\"\n                  >\n                    <span class=\"visually-hidden\">Loading...</span>\n                  </div>\n                  加到購物車\n                </button>\n              </div>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      <div class=\"text-end\">\n            <button @click='deleteAllCart' :disabled=\"cart.carts.length===0\"\n            class=\"btn btn-outline-danger\" type=\"button\">清空購物車</button>\n          </div>\n          <table class=\"table align-middle\">\n            <thead>\n              <tr>\n                <th></th>\n                <th>品名</th>\n                <th style=\"width: 150px\">數量/單位</th>\n                <th>單價</th>\n              </tr>\n            </thead>\n            <tbody>\n              <template v-for='(cart,key) in cartData.carts' :key=\"key +'cart'\">\n                <tr>\n                  <td>\n                    <button type=\"button\" class=\"btn btn-outline-danger btn-sm\" @click=\"deleteACart(cart.id)\">\n                      <!-- <i class=\"fas fa-spinner fa-pulse\"></i> -->\n                      x\n                    </button>\n                  </td>\n                  <td>\n                    {{cart.product.title}}\n                    <!-- <div class=\"text-success\">\n                      已套用優惠券\n                    </div> -->\n                  </td>\n                  <td>\n                    <div class=\"input-group input-group-sm\">\n                      <div class=\"input-group mb-3\">\n                        <select @change=\"putCartNum(cart)\"\n                        :disabled='isLoadingItem===cart.id' v-model=\"cart.qty\" class=\"form-select\">\n                          <option v-for='num in 20' :value=\"num\" :key='`${num}${cart.product_id}`'>{{num}}</option>\n                        </select>\n                        <!-- <input :value=\"cart.qty\"\n                            min=\"1\" type=\"number\" class=\"form-control\"> -->\n                        <span class=\"input-group-text\" id=\"basic-addon2\">{{ cart.product.unit }}</span>\n                      </div>\n                    </div>\n                  </td>\n                  <td class=\"text-end\">\n                    <!-- <small class=\"text-success\">折扣價：</small> -->\n                    {{ cart.product.price }}\n                  </td>\n                </tr>\n              </template>\n            </tbody>\n            <tfoot>\n              <tr>\n                <td colspan=\"3\" class=\"text-end\">總計</td>\n                <td class=\"text-end\">{{ cartData.total}}</td>\n              </tr>\n              <!-- <tr>\n                <td colspan=\"3\" class=\"text-end text-success\">折扣價</td>\n                <td class=\"text-end text-success\">{{  }}</td>\n              </tr> -->\n            </tfoot>\n          </table>\n    </div>\n  </div>\n</template>\n<script>\nimport emitter from '@/libs/emitter'\nexport default {\n  data () {\n    return {\n      products: [],\n      productId: '',\n      cartData: {},\n      isLoadingItem: '',\n      cart: {\n        carts: []\n      }\n    }\n  },\n  methods: {\n    getProducts () {\n      const url = `${process.env.VUE_APP_API}/v2/api/${process.env.VUE_APP_PATH}/products/all`\n      this.$http(url)\n        .then((res) => {\n          console.log(res)\n          this.products = res.data.products\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    },\n    addToCart (product, qty = 1) {\n      this.isLoadingItem = product.id\n      const url = `${process.env.VUE_APP_API}/v2/api/${process.env.VUE_APP_PATH}/cart`\n      const data = {\n        product_id: product.id,\n        qty\n      }\n      console.log(data)\n      this.$http.post(url, { data })\n        .then((res) => {\n          alert(`『 ${product.title} 』已加入購物車`)\n          this.renderCart()\n          this.isLoadingItem = ''\n          emitter.emit('render-cart')\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    },\n    deleteACart (id) {\n      const url = `${process.env.VUE_APP_API}/v2/api/${process.env.VUE_APP_PATH}/cart/${id}`\n      this.$http.delete(url)\n        .then((res) => {\n          console.log(res)\n          this.renderCart()\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    },\n    deleteAllCart () {\n      const url = `${process.env.VUE_APP_API}/v2/api/${process.env.VUE_APP_PATH}/carts`\n      this.$http.delete(url)\n        .then((res) => {\n          console.log(res)\n          this.renderCart()\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    },\n    renderCart () {\n      const url = `${process.env.VUE_APP_API}/v2/api/${process.env.VUE_APP_PATH}/cart`\n      this.$http(url)\n        .then((res) => {\n          this.cartData = res.data.data\n          console.log(this.cartData)\n          if (this.cartData.carts.length === 0) {\n            this.cart = {\n              carts: []\n            }\n          } else {\n            this.cart = {\n              carts: [1]\n            }\n          }\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    },\n    putCartNum (cart) {\n      this.isLoadingItem = cart.id\n      const url = `${process.env.VUE_APP_API}/v2/api/${process.env.VUE_APP_PATH}/cart/${cart.id}`\n      const data = {\n        product_id: cart.id,\n        qty: cart.qty\n      }\n      this.$http.put(url, { data })\n        .then((res) => {\n          this.isLoadingItem = ''\n          this.renderCart()\n        })\n        .catch((err) => {\n          console.dir(err)\n        })\n    },\n    postOrder () {\n      const url = `${process.env.VUE_APP_API}/v2/api/${process.env.VUE_APP_PATH}/order`\n      this.$http.post(url, { data: this.userData })\n        .then((res) => {\n          console.log(res)\n          this.$refs.form.resetForm()\n          this.renderCart()\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    }\n  },\n  mounted () {\n    this.getProducts()\n    this.renderCart()\n  }\n}\n</script>\n","import { render } from \"./CartView.vue?vue&type=template&id=3671ca14\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/tienpeiying/Dropbox/HTML/六角學院/Vue/2021_Vue_live/作業/第六週作業/week6_test1/week6-test01/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["n","all","Map","on","t","e","i","get","push","set","off","splice","indexOf","emit","slice","map","emitter","mitt","_createElementVNode","class","style","role","_hoisted_14","id","colspan","_hoisted_1","_hoisted_5","_createElementBlock","_Fragment","_renderList","$data","product","key","backgroundImage","imageUrl","_toDisplayString","title","price","origin_price","_hoisted_8","disabled","type","onClick","$options","_hoisted_15","carts","length","_hoisted_18","_hoisted_20","cart","_hoisted_21","onChange","qty","$event","num","value","product_id","_hoisted_25","unit","_hoisted_28","total","data","products","productId","cartData","isLoadingItem","methods","getProducts","url","this","$http","then","res","console","log","catch","err","addToCart","post","alert","renderCart","deleteACart","delete","deleteAllCart","putCartNum","put","dir","postOrder","userData","$refs","form","resetForm","mounted","__exports__","render"],"sourceRoot":""}